var $j=jQuery.noConflict();!function(e,t,s,i){function l(t,s){this.element=t,this.resultElement=null,this.options=e.extend({},u,s),this._defaults=u,this._name=n,this.apiUrl="https://primary.api.leadspend.com/v2/validity/",this._jsonpValidateEmail=function(t){e.getJSON(this.apiUrl+encodeURIComponent(t)+"?timeout="+this.options.timeout+"&callback=?",null).done(e.proxy(this._jsonpValidateEmailDone,this)).fail(e.proxy(this._jsonpValidateEmailFail,this))},this._jsonpValidateEmailDone=function(e,t,s){this.options.debug&&(console.log("LeadSpend result: "),console.log(e)),this._setResultValue(e.result)},this._jsonpValidateEmailFail=function(e,t,s){this._setResultPending(!1),this.options.debug?(console.log("Leadspend API $getJSON().fail() called. Logging jqXHR, textStatus, and errorThrown:"),console.log(e),console.log(t),console.log(s),this._setResultValue("error")):this._setResultValue("unknown")},this._createResultElement=function(){elementID=e(this.element).attr("id"),elementName=e(this.element).attr("name"),resultInputSuffix="-result",resultElementID=elementID?elementID+resultInputSuffix:"",resultElementName=elementName?elementName+resultInputSuffix:"",resultElementClass="leadSpendEmail"+resultInputSuffix,resultElementHtml='<input class="'+resultElementClass+'" id="'+resultElementID+'" name="'+resultElementName+'">',this.resultElement=e(resultElementHtml),this.resultElement.hide(),e(this.element).after(this.resultElement)},this._setResultPending=function(e){this.resultPending=e?!0:!1},this._setResultAddress=function(e){this.resultAddress=e},this._setResultValue=function(t){e(this.resultElement).val()!=t&&(this.options.debug&&console.log("Setting resultInput value to: "+t),e(this.resultElement).val(t),this._setResultPending("pending"==t?!0:!1),e(this.resultElement).trigger("change"),this.options.resultCallback&&this.options.resultCallback(this.element,this.resultElement),this.options.delaySubmit&&"pending"!=t&&this.submitPressed&&this._handleDelaySubmit())},this._getResultAddress=function(){return this.resultAddress},this._bindDelaySubmit=function(){e(this.form).on("submit",e.proxy(this._submitHandler,this))},this._submitHandler=function(e){this.submitPressed=!0,this.options.debug&&console.log("_submitHandler called"),this.resultPending&&(this.options.debug&&console.log("_submitHandler preventing submit default"),e.preventDefault())},this._handleDelaySubmit=function(){this.options.debug&&console.log("_handleDelaySubmit submitting form"),this.submitPressed=!1,e(this.form).find("[type='submit']").click()},this.validateEmailInput=function(){emailAddress=e(this.element).val(),emailAddress.indexOf("@")<emailAddress.lastIndexOf(".")?emailAddress!=this._getResultAddress()&&(this._setResultValue("pending"),this._setResultAddress(emailAddress),this._jsonpValidateEmail(emailAddress)):this._setResultValue("undeliverable")},this.init()}var n="leadSpendEmail",u={timeout:5,debug:!1,delaySubmit:!1,resultCallback:null};l.prototype.init=function(){return e(this.element).addClass("leadSpendEmail"),this._createResultElement(),this.options.delaySubmit&&(this.submitPressed=!1,this.form=e(this.element).closest("form"),this._bindDelaySubmit()),e(this.element).focusout(e.proxy(this.validateEmailInput,this)).keydown(e.proxy(function(e){code=e.keyCode?e.keyCode:e.which,13==code&&this.validateEmailInput()},this)),this},e.fn[n]=function(t){return this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new l(this,t))})}}(jQuery,window,document),$j(document).ready(function(){$j(".leadSpendEmail-noconfig").leadSpendEmail()});